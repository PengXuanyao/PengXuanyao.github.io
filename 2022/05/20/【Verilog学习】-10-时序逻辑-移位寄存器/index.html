<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>【Verilog学习】-10-时序逻辑-移位寄存器 | Xuanyao's Blog</title><meta name="author" content="Xuanyao Peng"><meta name="copyright" content="Xuanyao Peng"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Shift4questionBuild a 4-bit shift register (right shift), with asynchronous reset, synchronous load, and enable.">
<meta property="og:type" content="article">
<meta property="og:title" content="【Verilog学习】-10-时序逻辑-移位寄存器">
<meta property="og:url" content="http://example.com/2022/05/20/%E3%80%90Verilog%E5%AD%A6%E4%B9%A0%E3%80%91-10-%E6%97%B6%E5%BA%8F%E9%80%BB%E8%BE%91-%E7%A7%BB%E4%BD%8D%E5%AF%84%E5%AD%98%E5%99%A8/index.html">
<meta property="og:site_name" content="Xuanyao&#39;s Blog">
<meta property="og:description" content="Shift4questionBuild a 4-bit shift register (right shift), with asynchronous reset, synchronous load, and enable.">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s2.loli.net/2023/01/10/K5ZwIitHl2xDTVq.jpg">
<meta property="article:published_time" content="2022-05-20T01:00:20.000Z">
<meta property="article:modified_time" content="2023-01-11T04:16:35.766Z">
<meta property="article:author" content="Xuanyao Peng">
<meta property="article:tag" content="verilog">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2023/01/10/K5ZwIitHl2xDTVq.jpg"><link rel="shortcut icon" href="https://s2.loli.net/2023/01/10/ARwIOr2ym4q5kxY.png"><link rel="canonical" href="http://example.com/2022/05/20/%E3%80%90Verilog%E5%AD%A6%E4%B9%A0%E3%80%91-10-%E6%97%B6%E5%BA%8F%E9%80%BB%E8%BE%91-%E7%A7%BB%E4%BD%8D%E5%AF%84%E5%AD%98%E5%99%A8/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '【Verilog学习】-10-时序逻辑-移位寄存器',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-01-11 12:16:35'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://s2.loli.net/2023/01/11/uxgHFMtiBm1kKcf.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">105</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">73</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://api.ixiaowai.cn/gqapi/gqapi.php/')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Xuanyao's Blog</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">【Verilog学习】-10-时序逻辑-移位寄存器</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-05-20T01:00:20.000Z" title="发表于 2022-05-20 09:00:20">2022-05-20</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-01-11T04:16:35.766Z" title="更新于 2023-01-11 12:16:35">2023-01-11</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="【Verilog学习】-10-时序逻辑-移位寄存器"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="Shift4"><a href="#Shift4" class="headerlink" title="Shift4"></a>Shift4</h2><h3 id="question"><a href="#question" class="headerlink" title="question"></a>question</h3><p>Build a 4-bit shift register (right shift), with asynchronous reset, synchronous load, and enable.</p>
<span id="more"></span>

<ul>
<li><code>areset</code>: Resets shift register to zero.</li>
<li><code>load</code>: Loads shift register with <code>data[3:0]</code> instead of shifting.</li>
<li><code>ena</code>: Shift right (<code>q[3]</code> becomes zero, <code>q[0]</code> is shifted out and disappears).</li>
<li><code>q</code>: The contents of the shift register.</li>
</ul>
<p>If both the <code>load</code> and <code>ena</code> inputs are asserted (1), the <code>load</code> input has higher priority.</p>
<h3 id="Module-Declaration"><a href="#Module-Declaration" class="headerlink" title="Module Declaration"></a>Module Declaration</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">module top_module(</span><br><span class="line">    input clk,</span><br><span class="line">    input areset,  // async active-high reset to zero</span><br><span class="line">    input load,</span><br><span class="line">    input ena,</span><br><span class="line">    input [3:0] data,</span><br><span class="line">    output reg [3:0] q); </span><br></pre></td></tr></table></figure>

<h3 id="solution"><a href="#solution" class="headerlink" title="solution"></a>solution</h3><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// my answer</span></span><br><span class="line"><span class="keyword">module</span> top_module(</span><br><span class="line">    <span class="keyword">input</span> clk,</span><br><span class="line">    <span class="keyword">input</span> areset,  <span class="comment">// async active-high reset to zero</span></span><br><span class="line">    <span class="keyword">input</span> load,</span><br><span class="line">    <span class="keyword">input</span> ena,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">3</span>:<span class="number">0</span>] data,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> [<span class="number">3</span>:<span class="number">0</span>] q); </span><br><span class="line"><span class="keyword">always</span> @(<span class="keyword">posedge</span> clk <span class="keyword">or</span> <span class="keyword">posedge</span> areset) <span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">if</span> (areset) <span class="keyword">begin</span></span><br><span class="line">        q &lt;= <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (load == <span class="number">1&#x27;b1</span>) <span class="keyword">begin</span></span><br><span class="line">        q &lt;= data;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span> (ena == <span class="number">1&#x27;b1</span>) <span class="keyword">begin</span></span><br><span class="line">            q[<span class="number">3</span>] &lt;= <span class="number">0</span>;</span><br><span class="line">            q[<span class="number">2</span>] &lt;= q[<span class="number">3</span>];</span><br><span class="line">            q[<span class="number">1</span>] &lt;= q[<span class="number">2</span>];</span><br><span class="line">            q[<span class="number">0</span>] &lt;= q[<span class="number">1</span>];</span><br><span class="line">            <span class="comment">// q &lt;= q[3:1];</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// reference answer</span></span><br><span class="line"><span class="keyword">module</span> top_module(</span><br><span class="line">    <span class="keyword">input</span> clk,</span><br><span class="line">    <span class="keyword">input</span> areset,</span><br><span class="line">    <span class="keyword">input</span> load,</span><br><span class="line">    <span class="keyword">input</span> ena,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">3</span>:<span class="number">0</span>] data,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> [<span class="number">3</span>:<span class="number">0</span>] q);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Asynchronous reset: Notice the sensitivity list.</span></span><br><span class="line">    <span class="comment">// The shift register has four modes:</span></span><br><span class="line">    <span class="comment">//   reset</span></span><br><span class="line">    <span class="comment">//   load</span></span><br><span class="line">    <span class="comment">//   enable shift</span></span><br><span class="line">    <span class="comment">//   idle -- preserve q (i.e., DFFs)</span></span><br><span class="line">    <span class="keyword">always</span> @(<span class="keyword">posedge</span> clk, <span class="keyword">posedge</span> areset) <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span> (areset)        <span class="comment">// reset</span></span><br><span class="line">            q &lt;= <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (load)    <span class="comment">// load</span></span><br><span class="line">            q &lt;= data;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (ena)    <span class="comment">// shift is enabled</span></span><br><span class="line">            q &lt;= q[<span class="number">3</span>:<span class="number">1</span>];    <span class="comment">// Use vector part select to express a shift.</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>

<h2 id="Rotate100"><a href="#Rotate100" class="headerlink" title="Rotate100"></a>Rotate100</h2><h3 id="question-1"><a href="#question-1" class="headerlink" title="question"></a>question</h3><p>Build a 100-bit left&#x2F;right rotator, with synchronous load and left&#x2F;right enable. A rotator shifts-in the shifted-out bit from the other end of the register, unlike a shifter that discards the shifted-out bit and shifts in a zero. If enabled, a rotator rotates the bits around and does not modify&#x2F;discard them.</p>
<ul>
<li><p><code>load</code>: Loads shift register with <code>data[99:0]</code> instead of rotating.</p>
</li>
<li><p>ena[1:0]</p>
<p>: Chooses whether and which direction to rotate.</p>
<ul>
<li><code>2&#39;b01</code> rotates right by one bit</li>
<li><code>2&#39;b10</code> rotates left by one bit</li>
<li><code>2&#39;b00</code> and <code>2&#39;b11</code> do not rotate.</li>
</ul>
</li>
<li><p><code>q</code>: The contents of the rotator.</p>
</li>
</ul>
<h3 id="Module-Declaration-1"><a href="#Module-Declaration-1" class="headerlink" title="Module Declaration"></a>Module Declaration</h3><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> top_module(</span><br><span class="line">    <span class="keyword">input</span> clk,</span><br><span class="line">    <span class="keyword">input</span> load,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">1</span>:<span class="number">0</span>] ena,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">99</span>:<span class="number">0</span>] data,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> [<span class="number">99</span>:<span class="number">0</span>] q);</span><br></pre></td></tr></table></figure>

<h3 id="solution-1"><a href="#solution-1" class="headerlink" title="solution"></a>solution</h3><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// my ans</span></span><br><span class="line"><span class="keyword">module</span> top_module(</span><br><span class="line">    <span class="keyword">input</span> clk,</span><br><span class="line">    <span class="keyword">input</span> load,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">1</span>:<span class="number">0</span>] ena,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">99</span>:<span class="number">0</span>] data,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> [<span class="number">99</span>:<span class="number">0</span>] q);</span><br><span class="line"><span class="keyword">always</span> @(<span class="keyword">posedge</span> clk) <span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">if</span> (load) <span class="keyword">begin</span></span><br><span class="line">        q &lt;= data;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">case</span> (ena)</span><br><span class="line">            <span class="number">2&#x27;b01</span>: <span class="keyword">begin</span></span><br><span class="line">                q[<span class="number">98</span>:<span class="number">0</span>] &lt;= q[<span class="number">99</span>:<span class="number">1</span>];</span><br><span class="line">                q[<span class="number">99</span>] &lt;= q[<span class="number">0</span>];</span><br><span class="line">                <span class="comment">// q &lt;= &#123;q[0], q[99:1]&#125;;</span></span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="number">2&#x27;b10</span>: <span class="keyword">begin</span></span><br><span class="line">                q[<span class="number">99</span>:<span class="number">1</span>] &lt;= q[<span class="number">98</span>:<span class="number">0</span>];</span><br><span class="line">                q[<span class="number">0</span>] &lt;= q[<span class="number">99</span>];</span><br><span class="line">                <span class="comment">// q &lt;= &#123;q[98:0], q[99]&#125;;</span></span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">default</span>: </span><br><span class="line">                q &lt;= q;</span><br><span class="line">        <span class="keyword">endcase</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ref ans</span></span><br><span class="line"><span class="keyword">module</span> top_module(</span><br><span class="line">    <span class="keyword">input</span> clk,</span><br><span class="line">    <span class="keyword">input</span> load,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">1</span>:<span class="number">0</span>] ena,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">99</span>:<span class="number">0</span>] data,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> [<span class="number">99</span>:<span class="number">0</span>] q);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// This rotator has 4 modes:</span></span><br><span class="line">    <span class="comment">//   load</span></span><br><span class="line">    <span class="comment">//   rotate left</span></span><br><span class="line">    <span class="comment">//   rotate right</span></span><br><span class="line">    <span class="comment">//   do nothing</span></span><br><span class="line">    <span class="comment">// I used vector part-select and concatenation to express a rotation.</span></span><br><span class="line">    <span class="comment">// Edge-sensitive always block: Use non-blocking assignments.</span></span><br><span class="line">    <span class="keyword">always</span> @(<span class="keyword">posedge</span> clk) <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span> (load)        <span class="comment">// Load</span></span><br><span class="line">            q &lt;= data;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (ena == <span class="number">2&#x27;h1</span>)    <span class="comment">// Rotate right</span></span><br><span class="line">            q &lt;= &#123;q[<span class="number">0</span>], q[<span class="number">99</span>:<span class="number">1</span>]&#125;;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (ena == <span class="number">2&#x27;h2</span>)    <span class="comment">// Rotate left</span></span><br><span class="line">            q &lt;= &#123;q[<span class="number">98</span>:<span class="number">0</span>], q[<span class="number">99</span>]&#125;;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>

<h3 id="debug"><a href="#debug" class="headerlink" title="debug"></a>debug</h3><ul>
<li>case 里面对应的一个情况超过了一个语句描述，则需要用begin end</li>
</ul>
<h2 id="Shift18-Arithmetic-Shift-Register"><a href="#Shift18-Arithmetic-Shift-Register" class="headerlink" title="Shift18-Arithmetic Shift Register"></a>Shift18-Arithmetic Shift Register</h2><h3 id="question-2"><a href="#question-2" class="headerlink" title="question"></a>question</h3><p>Build a 64-bit <em>arithmetic</em> shift register, with synchronous load. The shifter can shift both left and right, and by 1 or 8 bit positions, selected by <code>amount</code>.</p>
<p>An <em>arithmetic</em> right shift shifts in the sign bit of the number in the shift register (<code>q[63]</code> in this case) instead of zero as done by a <em>logical</em> right shift. Another way of thinking about an arithmetic right shift is that it assumes the number being shifted is signed and preserves the sign, so that arithmetic right shift divides a signed number by a power of two.</p>
<p>There is no difference between logical and arithmetic <em>left</em> shifts.</p>
<ul>
<li><p><code>load</code>: Loads shift register with <code>data[63:0]</code> instead of shifting.</p>
</li>
<li><p><code>ena</code>: Chooses whether to shift.</p>
</li>
<li><p>amount</p>
<p>: Chooses which direction and how much to shift.</p>
<ul>
<li><code>2&#39;b00</code>: shift left by 1 bit.</li>
<li><code>2&#39;b01</code>: shift left by 8 bits.</li>
<li><code>2&#39;b10</code>: shift right by 1 bit.</li>
<li><code>2&#39;b11</code>: shift right by 8 bits.</li>
</ul>
</li>
<li><p><code>q</code>: The contents of the shifter.</p>
</li>
</ul>
<h3 id="Module-Declaration-2"><a href="#Module-Declaration-2" class="headerlink" title="Module Declaration"></a>Module Declaration</h3><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> top_module(</span><br><span class="line">    <span class="keyword">input</span> clk,</span><br><span class="line">    <span class="keyword">input</span> load,</span><br><span class="line">    <span class="keyword">input</span> ena,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">1</span>:<span class="number">0</span>] amount,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">63</span>:<span class="number">0</span>] data,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> [<span class="number">63</span>:<span class="number">0</span>] q); </span><br></pre></td></tr></table></figure>

<h3 id="Hint…"><a href="#Hint…" class="headerlink" title="Hint…"></a>Hint…</h3><p>A 5-bit number <code>11000</code> arithmetic right-shifted by 1 is <code>11100</code>, while a logical right shift would produce <code>01100</code>.</p>
<p>Similarly, a 5-bit number <code>01000</code> arithmetic right-shifted by 1 is <code>00100</code>, and a logical right shift would produce the same result, because the original number was non-negative.</p>
<h3 id="solution-2"><a href="#solution-2" class="headerlink" title="solution"></a>solution</h3><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> top_module(</span><br><span class="line">    <span class="keyword">input</span> clk,</span><br><span class="line">    <span class="keyword">input</span> load,</span><br><span class="line">    <span class="keyword">input</span> ena,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">1</span>:<span class="number">0</span>] amount,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">63</span>:<span class="number">0</span>] data,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> [<span class="number">63</span>:<span class="number">0</span>] q); </span><br><span class="line"><span class="keyword">always</span> @(<span class="keyword">posedge</span> clk) <span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">if</span> (load) <span class="keyword">begin</span></span><br><span class="line">        q &lt;= data;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span> (ena) <span class="keyword">begin</span></span><br><span class="line">            <span class="keyword">case</span> (amount)</span><br><span class="line">                <span class="number">2&#x27;b00</span>: <span class="keyword">begin</span></span><br><span class="line">                    q &lt;= &#123;q[<span class="number">62</span>:<span class="number">0</span>],<span class="number">1&#x27;b0</span>&#125;;</span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">                <span class="number">2&#x27;b01</span>: <span class="keyword">begin</span></span><br><span class="line">                    q &lt;= &#123;q[<span class="number">55</span>:<span class="number">0</span>],<span class="number">8&#x27;b0</span>&#125;;</span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">                <span class="number">2&#x27;b10</span>: <span class="keyword">begin</span></span><br><span class="line">                    q &lt;= q[<span class="number">63</span>] ? &#123;<span class="number">1&#x27;b1</span>,q[<span class="number">63</span>:<span class="number">1</span>]&#125; : &#123;<span class="number">1&#x27;b0</span>,q[<span class="number">63</span>:<span class="number">1</span>]&#125;;</span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">                <span class="number">2&#x27;b11</span>: <span class="keyword">begin</span></span><br><span class="line">                    q &lt;= q[<span class="number">63</span>] ? &#123;<span class="number">8&#x27;hff</span>,q[<span class="number">63</span>:<span class="number">8</span>]&#125; : &#123;<span class="number">8&#x27;h00</span>,q[<span class="number">63</span>:<span class="number">8</span>]&#125;;</span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">                <span class="keyword">default</span>: </span><br><span class="line">                    q &lt;= q;</span><br><span class="line">            <span class="keyword">endcase</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>

<h3 id="debug-1"><a href="#debug-1" class="headerlink" title="debug"></a>debug</h3><ul>
<li>三元运算符语法错误：正确：<code>q &lt;= q[63] ? &#123;1&#39;b1,q[63:1]&#125; : &#123;1&#39;b0,q[63:1]&#125;;</code>；错误：<code>q[63] ? q &lt;=  &#123;1&#39;b1,q[63:1]&#125; : q &lt;=  &#123;1&#39;b0,q[63:1]&#125;;</code></li>
<li>case 的对象错误：R：amount；E：ena。</li>
<li>case 的参数错误：R：2’b10；E：10。</li>
</ul>
<h2 id="LFSR"><a href="#LFSR" class="headerlink" title="LFSR"></a>LFSR</h2><p>A <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Linear_feedback_shift_register">linear feedback shift register</a> is a shift register usually with a few XOR gates to produce the next state of the shift register. A Galois LFSR is one particular arrangement where bit positions with a “tap” are XORed with the output bit to produce its next value, while bit positions without a tap shift. If the taps positions are carefully chosen, the LFSR can be made to be “maximum-length”. A maximum-length LFSR of n bits cycles through 2n-1 states before repeating (the all-zero state is never reached).</p>
<p>The following diagram shows a 5-bit maximal-length Galois LFSR with taps at bit positions 5 and 3. (Tap positions are usually numbered starting from 1). Note that I drew the XOR gate at position 5 for consistency, but one of the XOR gate inputs is 0.</p>
<p><img src="https://hdlbits.01xz.net/mw/images/9/9a/Lfsr5.png" alt="Lfsr5.png"></p>
<p>Build this LFSR. The <code>reset</code> should reset the LFSR to 1.</p>
<h3 id="Module-Declaration-3"><a href="#Module-Declaration-3" class="headerlink" title="Module Declaration"></a>Module Declaration</h3><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> top_module(</span><br><span class="line">    <span class="keyword">input</span> clk,</span><br><span class="line">    <span class="keyword">input</span> reset,    <span class="comment">// Active-high synchronous reset to 5&#x27;h1</span></span><br><span class="line">    <span class="keyword">output</span> [<span class="number">4</span>:<span class="number">0</span>] q</span><br><span class="line">); </span><br></pre></td></tr></table></figure>

<h3 id="Hint…-1"><a href="#Hint…-1" class="headerlink" title="Hint…"></a>Hint…</h3><p>The first few states starting at 1 are <code>00001</code>, <code>10100</code>, <code>01010</code>, <code>00101</code>, … The LFSR should cycle through 31 states before returning to <code>00001</code>.</p>
<h3 id="solution-3"><a href="#solution-3" class="headerlink" title="solution"></a>solution</h3><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// my answer</span></span><br><span class="line"><span class="keyword">module</span> top_module(</span><br><span class="line">    <span class="keyword">input</span> clk,</span><br><span class="line">    <span class="keyword">input</span> reset,    <span class="comment">// Active-high synchronous reset to 5&#x27;h1</span></span><br><span class="line">    <span class="keyword">output</span> [<span class="number">4</span>:<span class="number">0</span>] q</span><br><span class="line">); </span><br><span class="line"><span class="keyword">always</span> @(<span class="keyword">posedge</span> clk) <span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">if</span> (reset) <span class="keyword">begin</span></span><br><span class="line">        q &lt;= <span class="number">5&#x27;h1</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">        q[<span class="number">4</span>] &lt;= q[<span class="number">0</span>];</span><br><span class="line">        q[<span class="number">3</span>] &lt;= q[<span class="number">4</span>];</span><br><span class="line">        q[<span class="number">2</span>] &lt;= q[<span class="number">3</span>] ^ q[<span class="number">0</span>];</span><br><span class="line">        q[<span class="number">1</span>] &lt;= q[<span class="number">2</span>];</span><br><span class="line">        q[<span class="number">0</span>] &lt;= q[<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ref answer</span></span><br><span class="line"><span class="keyword">module</span> top_module(</span><br><span class="line">    <span class="keyword">input</span> clk,</span><br><span class="line">    <span class="keyword">input</span> reset,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> [<span class="number">4</span>:<span class="number">0</span>] q);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">reg</span> [<span class="number">4</span>:<span class="number">0</span>] q_next;        <span class="comment">// q_next is not a register</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Convenience: Create a combinational block of logic that computes</span></span><br><span class="line">    <span class="comment">// what the next value should be. For shorter code, I first shift</span></span><br><span class="line">    <span class="comment">// all of the values and then override the two bit positions that have taps.</span></span><br><span class="line">    <span class="comment">// A logic synthesizer creates a circuit that behaves as if the code were</span></span><br><span class="line">    <span class="comment">// executed sequentially, so later assignments override earlier ones.</span></span><br><span class="line">    <span class="comment">// Combinational always block: Use blocking assignments.</span></span><br><span class="line">    <span class="keyword">always</span> @(*) <span class="keyword">begin</span></span><br><span class="line">        q_next = q[<span class="number">4</span>:<span class="number">1</span>];    <span class="comment">// Shift all the bits. This is incorrect for q_next[4] and q_next[2]</span></span><br><span class="line">        q_next[<span class="number">4</span>] = q[<span class="number">0</span>];    <span class="comment">// Give q_next[4] and q_next[2] their correct assignments</span></span><br><span class="line">        q_next[<span class="number">2</span>] = q[<span class="number">3</span>] ^ q[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// This is just a set of DFFs. I chose to compute the connections between the</span></span><br><span class="line">    <span class="comment">// DFFs above in its own combinational always block, but you can combine them if you wish.</span></span><br><span class="line">    <span class="comment">// You&#x27;ll get the same circuit either way.</span></span><br><span class="line">    <span class="comment">// Edge-triggered always block: Use non-blocking assignments.</span></span><br><span class="line">    <span class="keyword">always</span> @(<span class="keyword">posedge</span> clk) <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span> (reset)</span><br><span class="line">            q &lt;= <span class="number">5&#x27;h1</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            q &lt;= q_next;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>

<h3 id="summary"><a href="#summary" class="headerlink" title="summary"></a>summary</h3><p>这里的作者使用了状态机的写法，通过组合逻辑列出其下一状态的值，这里需要注意的是，组合逻辑使用的是阻塞赋值，后一个值将前一个值覆盖，电路里将直接忽略前一个时刻的值。</p>
<h2 id="Mt2015-lfsr"><a href="#Mt2015-lfsr" class="headerlink" title="Mt2015 lfsr"></a>Mt2015 lfsr</h2><h3 id="question-3"><a href="#question-3" class="headerlink" title="question"></a>question</h3><p>Taken from 2015 midterm question 5. See also the first part of this question: <a target="_blank" rel="noopener" href="https://hdlbits.01xz.net/wiki/Mt2015_muxdff">mt2015_muxdff</a></p>
<p><a target="_blank" rel="noopener" href="https://hdlbits.01xz.net/wiki/File:Mt2015_muxdff.png"><img src="https://hdlbits.01xz.net/mw/thumb.php?f=Mt2015_muxdff.png&width=800" alt="Mt2015 muxdff.png"></a></p>
<p>Write the Verilog code for this sequential circuit (Submodules are ok, but the top-level must be named <code>top_module</code>). Assume that you are going to implement the circuit on the DE1-SoC board. Connect the <code>R</code> inputs to the <code>SW</code> switches, connect Clock to <code>KEY[0]</code>, and <code>L</code> to <code>KEY[1]</code>. Connect the <code>Q</code> outputs to the red lights <code>LEDR</code>.</p>
<h3 id="Module-Declaration-4"><a href="#Module-Declaration-4" class="headerlink" title="Module Declaration"></a>Module Declaration</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">module top_module (</span><br><span class="line">    input [2:0] SW,      // R</span><br><span class="line">    input [1:0] KEY,     // L and clk</span><br><span class="line">    output [2:0] LEDR);  // Q</span><br></pre></td></tr></table></figure>

<h3 id="Hint…-2"><a href="#Hint…-2" class="headerlink" title="Hint…"></a>Hint…</h3><p>This circuit is an example of a <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Linear_feedback_shift_register">Linear Feedback Shift Register</a> (LFSR). A maximum-period LFSR can be used to generate pseudorandom numbers, as it cycles through 2n-1 combinations before repeating. The all-zeros combination does not appear in this sequence.</p>
<h3 id="solution-4"><a href="#solution-4" class="headerlink" title="solution"></a>solution</h3><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> top_module (</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">2</span>:<span class="number">0</span>] SW,      <span class="comment">// R</span></span><br><span class="line">    <span class="keyword">input</span> [<span class="number">1</span>:<span class="number">0</span>] KEY,     <span class="comment">// L and clk</span></span><br><span class="line">    <span class="keyword">output</span> [<span class="number">2</span>:<span class="number">0</span>] LEDR);  <span class="comment">// Q</span></span><br><span class="line"><span class="keyword">reg</span> [<span class="number">2</span>:<span class="number">0</span>] next_ledr;</span><br><span class="line"><span class="keyword">always</span> @(*) <span class="keyword">begin</span></span><br><span class="line">   next_ledr = &#123;LEDR[<span class="number">1</span>] ^ LEDR[<span class="number">2</span>],LEDR[<span class="number">0</span>],LEDR[<span class="number">2</span>]&#125; ;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">always</span> @(<span class="keyword">posedge</span> KEY[<span class="number">0</span>]) <span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">if</span> (KEY[<span class="number">1</span>])</span><br><span class="line">        LEDR &lt;= SW;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">        LEDR &lt;= next_ledr;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>

<h2 id="Lfsr32"><a href="#Lfsr32" class="headerlink" title="Lfsr32"></a>Lfsr32</h2><p>See <a target="_blank" rel="noopener" href="https://hdlbits.01xz.net/wiki/Lfsr5">Lfsr5</a> for explanations.</p>
<p>Build a 32-bit Galois LFSR with taps at bit positions 32, 22, 2, and 1.</p>
<h3 id="Module-Declaration-5"><a href="#Module-Declaration-5" class="headerlink" title="Module Declaration"></a>Module Declaration</h3><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> top_module(</span><br><span class="line">    <span class="keyword">input</span> clk,</span><br><span class="line">    <span class="keyword">input</span> reset,    <span class="comment">// Active-high synchronous reset to 32&#x27;h1</span></span><br><span class="line">    <span class="keyword">output</span> [<span class="number">31</span>:<span class="number">0</span>] q</span><br><span class="line">); </span><br></pre></td></tr></table></figure>

<h3 id="solution-5"><a href="#solution-5" class="headerlink" title="solution"></a>solution</h3><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> top_module(</span><br><span class="line">    <span class="keyword">input</span> clk,</span><br><span class="line">    <span class="keyword">input</span> reset,    <span class="comment">// Active-high synchronous reset to 32&#x27;h1</span></span><br><span class="line">    <span class="keyword">output</span> [<span class="number">31</span>:<span class="number">0</span>] q</span><br><span class="line">); </span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] next_q;</span><br><span class="line">    <span class="keyword">always</span> @(*) <span class="keyword">begin</span></span><br><span class="line">        next_q = &#123;q[<span class="number">0</span>],q[<span class="number">31</span>:<span class="number">1</span>]&#125;;</span><br><span class="line">        next_q[<span class="number">31</span>] = q[<span class="number">0</span>];</span><br><span class="line">        next_q[<span class="number">21</span>] = q[<span class="number">22</span>] ^ q[<span class="number">0</span>];</span><br><span class="line">        next_q[<span class="number">1</span>] = q[<span class="number">2</span>] ^ q[<span class="number">0</span>];</span><br><span class="line">        next_q[<span class="number">0</span>] = q[<span class="number">1</span>] ^ q[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">always</span> @(<span class="keyword">posedge</span> clk) <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span> (reset) <span class="keyword">begin</span></span><br><span class="line">            q &lt;= <span class="number">32&#x27;h1</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">           q &lt;= next_q;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>

<h2 id="Exams-x2F-m2014-q4k"><a href="#Exams-x2F-m2014-q4k" class="headerlink" title="Exams&#x2F;m2014 q4k"></a>Exams&#x2F;m2014 q4k</h2><h3 id="question-4"><a href="#question-4" class="headerlink" title="question"></a>question</h3><p>Implement the following circuit:</p>
<p><a target="_blank" rel="noopener" href="https://hdlbits.01xz.net/wiki/File:Exams_m2014q4k.png"><img src="https://hdlbits.01xz.net/mw/images/1/15/Exams_m2014q4k.png" alt="Exams m2014q4k.png"></a></p>
<h3 id="Module-Declaration-6"><a href="#Module-Declaration-6" class="headerlink" title="Module Declaration"></a>Module Declaration</h3><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> top_module (</span><br><span class="line">    <span class="keyword">input</span> clk,</span><br><span class="line">    <span class="keyword">input</span> resetn,   <span class="comment">// synchronous reset</span></span><br><span class="line">    <span class="keyword">input</span> in,</span><br><span class="line">    <span class="keyword">output</span> out);</span><br></pre></td></tr></table></figure>

<h3 id="solution-6"><a href="#solution-6" class="headerlink" title="solution"></a>solution</h3><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> top_module (</span><br><span class="line">    <span class="keyword">input</span> clk,</span><br><span class="line">    <span class="keyword">input</span> resetn,   <span class="comment">// synchronous reset</span></span><br><span class="line">    <span class="keyword">input</span> in,</span><br><span class="line">    <span class="keyword">output</span> out);</span><br><span class="line">    <span class="keyword">reg</span> [<span class="number">3</span>:<span class="number">0</span>] q;</span><br><span class="line">    <span class="keyword">assign</span> out = q[<span class="number">3</span>];</span><br><span class="line">    <span class="keyword">always</span> @(<span class="keyword">posedge</span> clk) <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span> (!resetn) <span class="keyword">begin</span></span><br><span class="line">            q &lt;= <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">            <span class="keyword">integer</span> i;</span><br><span class="line">            <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt;= <span class="number">2</span>; i = i + <span class="number">1</span>) <span class="keyword">begin</span></span><br><span class="line">                q[i + <span class="number">1</span>] &lt;= q[i]; </span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            q[<span class="number">0</span>] &lt;= in;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>

<h2 id="Exams-x2F-2014-q4b"><a href="#Exams-x2F-2014-q4b" class="headerlink" title="Exams&#x2F;2014 q4b"></a>Exams&#x2F;2014 q4b</h2><h3 id="question-5"><a href="#question-5" class="headerlink" title="question"></a>question</h3><p>Consider the <em>n</em>-bit shift register circuit shown below:</p>
<p><a target="_blank" rel="noopener" href="https://hdlbits.01xz.net/wiki/File:Exams_2014q4.png"><img src="https://hdlbits.01xz.net/mw/thumb.php?f=Exams_2014q4.png&width=900" alt="Exams 2014q4.png"></a></p>
<p>Write a top-level Verilog module (named top_module) for the shift register, assuming that <em>n</em> &#x3D; 4. Instantiate four copies of your MUXDFF subcircuit in your top-level module. Assume that you are going to implement the circuit on the DE2 board.</p>
<ul>
<li>Connect the <em>R</em> inputs to the <em>SW</em> switches,</li>
<li><em>clk</em> to <em>KEY[0]</em>,</li>
<li><em>E</em> to <em>KEY[1]</em>,</li>
<li><em>L</em> to <em>KEY[2]</em>, and</li>
<li><em>w</em> to <em>KEY[3]</em>.</li>
<li>Connect the outputs to the red lights <em>LEDR[3:0]</em>.</li>
</ul>
<p>(Reuse your MUXDFF from <a target="_blank" rel="noopener" href="https://hdlbits.01xz.net/wiki/Exams/2014_q4a">exams&#x2F;2014_q4a</a>.)</p>
<h3 id="Module-Declaration-7"><a href="#Module-Declaration-7" class="headerlink" title="Module Declaration"></a>Module Declaration</h3><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> top_module (</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">3</span>:<span class="number">0</span>] SW,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">3</span>:<span class="number">0</span>] KEY,</span><br><span class="line">    <span class="keyword">output</span> [<span class="number">3</span>:<span class="number">0</span>] LEDR</span><br><span class="line">); </span><br></pre></td></tr></table></figure>

<h3 id="solution-7"><a href="#solution-7" class="headerlink" title="solution"></a>solution</h3><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> top_module (</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">3</span>:<span class="number">0</span>] SW,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">3</span>:<span class="number">0</span>] KEY,</span><br><span class="line">    <span class="keyword">output</span> [<span class="number">3</span>:<span class="number">0</span>] LEDR</span><br><span class="line">); <span class="comment">//</span></span><br><span class="line">    <span class="keyword">genvar</span> i;</span><br><span class="line">    <span class="keyword">generate</span></span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">3</span>; i &gt;= <span class="number">1</span> ; i = i - <span class="number">1</span>) <span class="keyword">begin</span>: for_bk</span><br><span class="line">            MUXDFF MUXDFF_inst(</span><br><span class="line">                <span class="variable">.w</span>(LEDR[i]),</span><br><span class="line">                <span class="variable">.R</span>(SW[i - <span class="number">1</span>]),</span><br><span class="line">                <span class="variable">.E</span>(KEY[<span class="number">1</span>]),</span><br><span class="line">                <span class="variable">.L</span>(KEY[<span class="number">2</span>]),</span><br><span class="line">                <span class="variable">.clk</span>(KEY[<span class="number">0</span>]),</span><br><span class="line">                <span class="variable">.Q</span>(LEDR[i - <span class="number">1</span>])</span><br><span class="line">            ); </span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        MUXDFF MUXDFF_inst_3(</span><br><span class="line">            <span class="variable">.w</span>(KEY[<span class="number">3</span>]),</span><br><span class="line">            <span class="variable">.R</span>(SW[<span class="number">3</span>]),</span><br><span class="line">            <span class="variable">.E</span>(KEY[<span class="number">1</span>]),</span><br><span class="line">            <span class="variable">.L</span>(KEY[<span class="number">2</span>]),</span><br><span class="line">            <span class="variable">.clk</span>(KEY[<span class="number">0</span>]),</span><br><span class="line">            <span class="variable">.Q</span>(LEDR[<span class="number">3</span>])</span><br><span class="line">         ); </span><br><span class="line">    <span class="keyword">endgenerate</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">endmodule</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">module</span> MUXDFF (</span><br><span class="line">    <span class="keyword">input</span> w, R, E, L,</span><br><span class="line">    <span class="keyword">input</span> clk,</span><br><span class="line">    <span class="keyword">output</span> Q</span><br><span class="line">);</span><br><span class="line">    <span class="keyword">wire</span> mid, next_Q;</span><br><span class="line">    <span class="keyword">always</span> @(*) <span class="keyword">begin</span></span><br><span class="line">        next_Q = L ? R : mid;</span><br><span class="line">        mid = E ? w : Q;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">always</span> @(<span class="keyword">posedge</span> clk) <span class="keyword">begin</span></span><br><span class="line">        Q &lt;= next_Q;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>

<h2 id="Exams-x2F-ece241-2013q12"><a href="#Exams-x2F-ece241-2013q12" class="headerlink" title="Exams&#x2F;ece241 2013q12"></a>Exams&#x2F;ece241 2013q12</h2><h3 id="question-6"><a href="#question-6" class="headerlink" title="question"></a>question</h3><p>In this question, you will design a circuit for an 8x1 memory, where writing to the memory is accomplished by shifting-in bits, and reading is “random access”, as in a typical RAM. You will then use the circuit to realize a 3-input logic function.</p>
<p>First, create an 8-bit shift register with 8 D-type flip-flops. Label the flip-flop outputs from Q[0]…Q[7]. The shift register input should be called <strong>S</strong>, which feeds the input of Q[0] (MSB is shifted in first). The <strong>enable</strong> input controls whether to shift. Then, extend the circuit to have 3 additional inputs <strong>A</strong>,<strong>B</strong>,<strong>C</strong> and an output <strong>Z</strong>. The circuit’s behaviour should be as follows: when ABC is 000, Z&#x3D;Q[0], when ABC is 001, Z&#x3D;Q[1], and so on. Your circuit should contain ONLY the 8-bit shift register, and multiplexers. (Aside: this circuit is called a 3-input look-up-table (LUT)).</p>
<h3 id="Module-Declaration-8"><a href="#Module-Declaration-8" class="headerlink" title="Module Declaration"></a>Module Declaration</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">module top_module (</span><br><span class="line">    input clk,</span><br><span class="line">    input enable,</span><br><span class="line">    input S,</span><br><span class="line">    input A, B, C,</span><br><span class="line">    output Z ); </span><br></pre></td></tr></table></figure>

<h3 id="solution-8"><a href="#solution-8" class="headerlink" title="solution"></a>solution</h3><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> top_module (</span><br><span class="line">    <span class="keyword">input</span> clk,</span><br><span class="line">    <span class="keyword">input</span> enable,</span><br><span class="line">    <span class="keyword">input</span> S,</span><br><span class="line">    <span class="keyword">input</span> A, B, C,</span><br><span class="line">    <span class="keyword">output</span> Z ); </span><br><span class="line">    <span class="keyword">reg</span> [<span class="number">7</span>:<span class="number">0</span>] Q;</span><br><span class="line">    <span class="keyword">always</span> @(<span class="keyword">posedge</span> clk) <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span> (enable) <span class="keyword">begin</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">integer</span> i = <span class="number">0</span>; i &lt; <span class="number">7</span> ; i = i + <span class="number">1</span>) <span class="keyword">begin</span></span><br><span class="line">                Q[i + <span class="number">1</span>] &lt;= Q[i];</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            Q[<span class="number">0</span>] &lt;= S;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">module</span> top_module (</span><br><span class="line">    <span class="keyword">input</span> clk,</span><br><span class="line">    <span class="keyword">input</span> enable,</span><br><span class="line">    <span class="keyword">input</span> S,</span><br><span class="line">    <span class="keyword">input</span> A, B, C,</span><br><span class="line">    <span class="keyword">output</span> Z ); </span><br><span class="line">    <span class="keyword">reg</span> [<span class="number">7</span>:<span class="number">0</span>] Q;</span><br><span class="line">    <span class="keyword">always</span> @(<span class="keyword">posedge</span> clk) <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span> (enable) <span class="keyword">begin</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">integer</span> i = <span class="number">0</span>; i &lt; <span class="number">7</span> ; i = i + <span class="number">1</span>) <span class="keyword">begin</span></span><br><span class="line">                Q[i + <span class="number">1</span>] &lt;= Q[i];</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            Q[<span class="number">0</span>] &lt;= S;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">always</span> @(*) <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">case</span> (&#123;A,B,C&#125;)</span><br><span class="line">            <span class="number">3&#x27;b000</span>: Z = Q[<span class="number">0</span>];</span><br><span class="line">            <span class="number">3&#x27;b001</span>: Z = Q[<span class="number">1</span>];</span><br><span class="line">            <span class="number">3&#x27;b010</span>: Z = Q[<span class="number">2</span>];</span><br><span class="line">            <span class="number">3&#x27;b011</span>: Z = Q[<span class="number">3</span>];</span><br><span class="line">            <span class="number">3&#x27;b100</span>: Z = Q[<span class="number">4</span>];</span><br><span class="line">            <span class="number">3&#x27;b101</span>: Z = Q[<span class="number">5</span>];</span><br><span class="line">            <span class="number">3&#x27;b110</span>: Z = Q[<span class="number">6</span>];</span><br><span class="line">            <span class="number">3&#x27;b111</span>: Z = Q[<span class="number">7</span>];</span><br><span class="line">        <span class="keyword">endcase</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br><span class="line"><span class="comment">/*    always @(*) begin</span></span><br><span class="line"><span class="comment">        case &#123;A,B,C&#125;: // USAGE OF CASE IS WRONG </span></span><br><span class="line"><span class="comment">            3&#x27;b000: Z = Q[0];</span></span><br><span class="line"><span class="comment">            3&#x27;b001: Z = Q[1];</span></span><br><span class="line"><span class="comment">            3&#x27;b010: Z = Q[2];</span></span><br><span class="line"><span class="comment">            3&#x27;b011: Z = Q[3];</span></span><br><span class="line"><span class="comment">            3&#x27;b100: Z = Q[4];</span></span><br><span class="line"><span class="comment">            3&#x27;b101: Z = Q[5];</span></span><br><span class="line"><span class="comment">            3&#x27;b110: Z = Q[6];</span></span><br><span class="line"><span class="comment">            3&#x27;b111: Z = Q[7];</span></span><br><span class="line"><span class="comment">        endcase</span></span><br><span class="line"><span class="comment">    end</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h3 id="Debug"><a href="#Debug" class="headerlink" title="Debug"></a>Debug</h3><ul>
<li>注意case的用法</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://example.com">Xuanyao Peng</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2022/05/20/%E3%80%90Verilog%E5%AD%A6%E4%B9%A0%E3%80%91-10-%E6%97%B6%E5%BA%8F%E9%80%BB%E8%BE%91-%E7%A7%BB%E4%BD%8D%E5%AF%84%E5%AD%98%E5%99%A8/">http://example.com/2022/05/20/%E3%80%90Verilog%E5%AD%A6%E4%B9%A0%E3%80%91-10-%E6%97%B6%E5%BA%8F%E9%80%BB%E8%BE%91-%E7%A7%BB%E4%BD%8D%E5%AF%84%E5%AD%98%E5%99%A8/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">Xuanyao's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/verilog/">verilog</a></div><div class="post_share"><div class="social-share" data-image="https://s2.loli.net/2023/01/10/K5ZwIitHl2xDTVq.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/05/25/%E3%80%90Verilog%E5%AD%A6%E4%B9%A0%E3%80%91-11-%E6%97%B6%E5%BA%8F%E9%80%BB%E8%BE%91-MoreCircuit/"><img class="prev-cover" src="https://s2.loli.net/2023/01/10/K5ZwIitHl2xDTVq.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">【Verilog学习】-11-时序逻辑-MoreCircuit</div></div></a></div><div class="next-post pull-right"><a href="/2022/05/15/%E3%80%90%E6%9C%AD%E8%AE%B0%E3%80%91%E9%87%8D%E6%96%B0%E5%BC%80%E5%A7%8B%E5%86%99%E5%8D%9A%E5%AE%A2/"><img class="next-cover" src="https://s2.loli.net/2023/01/10/3MOlt6XpLWhyrAx.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">【札记】重新开始写博客</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2022/01/12/%E3%80%90CAG_SLAM%E3%80%91-01-%E6%8E%A7%E5%88%B6%E4%BF%A1%E5%8F%B7/" title="【CAG_SLAM】-01-控制信号"><img class="cover" src="https://s2.loli.net/2023/01/10/MhktI1loSdFYmJT.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-12</div><div class="title">【CAG_SLAM】-01-控制信号</div></div></a></div><div><a href="/2022/01/05/%E3%80%90CAG_SLAM%E3%80%91-00-%E6%AF%94%E8%BE%83%E6%A0%91/" title="【CAG_SLAM】-00-比较树"><img class="cover" src="https://s2.loli.net/2023/01/10/MhktI1loSdFYmJT.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-05</div><div class="title">【CAG_SLAM】-00-比较树</div></div></a></div><div><a href="/2022/01/17/%E3%80%90CAG_SLAM%E3%80%91-02-%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93/" title="【CAG-SLAM】-02-项目总结"><img class="cover" src="https://s2.loli.net/2023/01/10/MhktI1loSdFYmJT.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-17</div><div class="title">【CAG-SLAM】-02-项目总结</div></div></a></div><div><a href="/2022/02/28/%E3%80%90CAG_SLAM%E3%80%91-03-Padding-Modules/" title="【CAG_SLAM】-03-Padding-Modules"><img class="cover" src="https://s2.loli.net/2023/01/10/MhktI1loSdFYmJT.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-28</div><div class="title">【CAG_SLAM】-03-Padding-Modules</div></div></a></div><div><a href="/2022/03/17/%E3%80%90CAG_SLAM%E3%80%91-04-%E9%99%A4%E6%B3%95%E5%99%A8/" title="【CAG_SLAM】-04-除法器"><img class="cover" src="https://s2.loli.net/2023/01/10/MhktI1loSdFYmJT.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-17</div><div class="title">【CAG_SLAM】-04-除法器</div></div></a></div><div><a href="/2022/03/20/%E3%80%90CAG_SLAM%E3%80%91-05-Zero-Padding/" title="【CAG_SLAM】-05-Zero-Padding"><img class="cover" src="https://s2.loli.net/2023/01/10/MhktI1loSdFYmJT.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-20</div><div class="title">【CAG_SLAM】-05-Zero-Padding</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://s2.loli.net/2023/01/11/uxgHFMtiBm1kKcf.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Xuanyao Peng</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">105</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">73</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/PengXuanyao"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">新手学电脑，也请多多指教。</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Shift4"><span class="toc-number">1.</span> <span class="toc-text">Shift4</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#question"><span class="toc-number">1.1.</span> <span class="toc-text">question</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Module-Declaration"><span class="toc-number">1.2.</span> <span class="toc-text">Module Declaration</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#solution"><span class="toc-number">1.3.</span> <span class="toc-text">solution</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Rotate100"><span class="toc-number">2.</span> <span class="toc-text">Rotate100</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#question-1"><span class="toc-number">2.1.</span> <span class="toc-text">question</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Module-Declaration-1"><span class="toc-number">2.2.</span> <span class="toc-text">Module Declaration</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#solution-1"><span class="toc-number">2.3.</span> <span class="toc-text">solution</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#debug"><span class="toc-number">2.4.</span> <span class="toc-text">debug</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Shift18-Arithmetic-Shift-Register"><span class="toc-number">3.</span> <span class="toc-text">Shift18-Arithmetic Shift Register</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#question-2"><span class="toc-number">3.1.</span> <span class="toc-text">question</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Module-Declaration-2"><span class="toc-number">3.2.</span> <span class="toc-text">Module Declaration</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hint%E2%80%A6"><span class="toc-number">3.3.</span> <span class="toc-text">Hint…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#solution-2"><span class="toc-number">3.4.</span> <span class="toc-text">solution</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#debug-1"><span class="toc-number">3.5.</span> <span class="toc-text">debug</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#LFSR"><span class="toc-number">4.</span> <span class="toc-text">LFSR</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Module-Declaration-3"><span class="toc-number">4.1.</span> <span class="toc-text">Module Declaration</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hint%E2%80%A6-1"><span class="toc-number">4.2.</span> <span class="toc-text">Hint…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#solution-3"><span class="toc-number">4.3.</span> <span class="toc-text">solution</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#summary"><span class="toc-number">4.4.</span> <span class="toc-text">summary</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mt2015-lfsr"><span class="toc-number">5.</span> <span class="toc-text">Mt2015 lfsr</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#question-3"><span class="toc-number">5.1.</span> <span class="toc-text">question</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Module-Declaration-4"><span class="toc-number">5.2.</span> <span class="toc-text">Module Declaration</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hint%E2%80%A6-2"><span class="toc-number">5.3.</span> <span class="toc-text">Hint…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#solution-4"><span class="toc-number">5.4.</span> <span class="toc-text">solution</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Lfsr32"><span class="toc-number">6.</span> <span class="toc-text">Lfsr32</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Module-Declaration-5"><span class="toc-number">6.1.</span> <span class="toc-text">Module Declaration</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#solution-5"><span class="toc-number">6.2.</span> <span class="toc-text">solution</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Exams-x2F-m2014-q4k"><span class="toc-number">7.</span> <span class="toc-text">Exams&#x2F;m2014 q4k</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#question-4"><span class="toc-number">7.1.</span> <span class="toc-text">question</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Module-Declaration-6"><span class="toc-number">7.2.</span> <span class="toc-text">Module Declaration</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#solution-6"><span class="toc-number">7.3.</span> <span class="toc-text">solution</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Exams-x2F-2014-q4b"><span class="toc-number">8.</span> <span class="toc-text">Exams&#x2F;2014 q4b</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#question-5"><span class="toc-number">8.1.</span> <span class="toc-text">question</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Module-Declaration-7"><span class="toc-number">8.2.</span> <span class="toc-text">Module Declaration</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#solution-7"><span class="toc-number">8.3.</span> <span class="toc-text">solution</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Exams-x2F-ece241-2013q12"><span class="toc-number">9.</span> <span class="toc-text">Exams&#x2F;ece241 2013q12</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#question-6"><span class="toc-number">9.1.</span> <span class="toc-text">question</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Module-Declaration-8"><span class="toc-number">9.2.</span> <span class="toc-text">Module Declaration</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#solution-8"><span class="toc-number">9.3.</span> <span class="toc-text">solution</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Debug"><span class="toc-number">9.4.</span> <span class="toc-text">Debug</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/01/12/%E3%80%90Hexo%E3%80%91-06-%E4%BD%BF%E7%94%A8github%E5%90%8C%E6%AD%A5%E5%8D%9A%E5%AE%A2%E6%97%B6%E7%9A%84%E8%8B%A5%E5%B9%B2%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3/" title="【Hexo】-06-使用github同步博客时的若干问题及解决"><img src="https://s2.loli.net/2023/01/10/Gnz3RKpxZOYeulf.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【Hexo】-06-使用github同步博客时的若干问题及解决"/></a><div class="content"><a class="title" href="/2023/01/12/%E3%80%90Hexo%E3%80%91-06-%E4%BD%BF%E7%94%A8github%E5%90%8C%E6%AD%A5%E5%8D%9A%E5%AE%A2%E6%97%B6%E7%9A%84%E8%8B%A5%E5%B9%B2%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3/" title="【Hexo】-06-使用github同步博客时的若干问题及解决">【Hexo】-06-使用github同步博客时的若干问题及解决</a><time datetime="2023-01-12T09:56:23.000Z" title="发表于 2023-01-12 17:56:23">2023-01-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/01/10/%E3%80%90Fluid%E3%80%9100_Hexo%E4%B8%BB%E9%A2%98Fluid%E9%85%8D%E7%BD%AE/" title="【Fluid】00_Hexo主题Fluid配置"><img src="https://avatars2.githubusercontent.com/t/3419353?s=280&amp;v=4" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【Fluid】00_Hexo主题Fluid配置"/></a><div class="content"><a class="title" href="/2023/01/10/%E3%80%90Fluid%E3%80%9100_Hexo%E4%B8%BB%E9%A2%98Fluid%E9%85%8D%E7%BD%AE/" title="【Fluid】00_Hexo主题Fluid配置">【Fluid】00_Hexo主题Fluid配置</a><time datetime="2023-01-10T07:10:00.000Z" title="发表于 2023-01-10 15:10:00">2023-01-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/01/10/%E3%80%90%E6%98%9F%E6%B2%B3%E6%9D%AF%E3%80%9100_%E8%B5%9B%E9%A2%98%E5%8F%91%E5%B8%83%E6%B2%99%E9%BE%99/" title="【星河杯】00_赛题发布沙龙"><img src="https://s2.loli.net/2023/01/10/nqXCl9KY8mQHa4B.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【星河杯】00_赛题发布沙龙"/></a><div class="content"><a class="title" href="/2023/01/10/%E3%80%90%E6%98%9F%E6%B2%B3%E6%9D%AF%E3%80%9100_%E8%B5%9B%E9%A2%98%E5%8F%91%E5%B8%83%E6%B2%99%E9%BE%99/" title="【星河杯】00_赛题发布沙龙">【星河杯】00_赛题发布沙龙</a><time datetime="2023-01-10T06:02:19.000Z" title="发表于 2023-01-10 14:02:19">2023-01-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/12/18/%E3%80%90ChiselBookByLiang%E3%80%9100_Chisel/" title="【ChiselBookByLiang】00_Chisel"><img src="https://s2.loli.net/2023/01/10/WrvaUEYJ4xioHbm.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【ChiselBookByLiang】00_Chisel"/></a><div class="content"><a class="title" href="/2022/12/18/%E3%80%90ChiselBookByLiang%E3%80%9100_Chisel/" title="【ChiselBookByLiang】00_Chisel">【ChiselBookByLiang】00_Chisel</a><time datetime="2022-12-18T03:36:20.000Z" title="发表于 2022-12-18 11:36:20">2022-12-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/12/10/%E3%80%90ChiselBookV1%E3%80%9100_Combinational_Circuit/" title="【ChiselBookV1】00_Combinational_Circuit"><img src="https://s2.loli.net/2023/01/10/w6JK7dIO8ijpDg3.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【ChiselBookV1】00_Combinational_Circuit"/></a><div class="content"><a class="title" href="/2022/12/10/%E3%80%90ChiselBookV1%E3%80%9100_Combinational_Circuit/" title="【ChiselBookV1】00_Combinational_Circuit">【ChiselBookV1】00_Combinational_Circuit</a><time datetime="2022-12-10T11:20:20.000Z" title="发表于 2022-12-10 19:20:20">2022-12-10</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By Xuanyao Peng</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">❤️🧡💚🇨🇳💙💜🤎</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>